import{r as E,aH as L,o as v,d as x,b,a7 as w,n as p,h as P,g as S,l as m,u as H,w as T,x as C,aL as M,aM as Q}from"./index-hKTwE-_U.js";function R(){const i=E(!L.value);return i.value===!1&&v(()=>{i.value=!0}),{isHydrated:i}}const O=typeof ResizeObserver<"u",y=O===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},V=x({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(i,{emit:g}){let e=null,t,r={width:-1,height:-1};function c(n){n===!0||i.debounce===0||i.debounce==="0"?s():e===null&&(e=setTimeout(s,i.debounce))}function s(){if(e!==null&&(clearTimeout(e),e=null),t){const{offsetWidth:n,offsetHeight:o}=t;(n!==r.width||o!==r.height)&&(r={width:n,height:o},g("resize",r))}}const{proxy:d}=S();if(d.trigger=c,O===!0){let n;const o=u=>{t=d.$el.parentNode,t?(n=new ResizeObserver(c),n.observe(t),s()):u!==!0&&p(()=>{o(!0)})};return v(()=>{o()}),b(()=>{e!==null&&clearTimeout(e),n!==void 0&&(n.disconnect!==void 0?n.disconnect():t&&n.unobserve(t))}),w}else{let n=function(){e!==null&&(clearTimeout(e),e=null),l!==void 0&&(l.removeEventListener!==void 0&&l.removeEventListener("resize",c,m.passive),l=void 0)},o=function(){n(),t&&t.contentDocument&&(l=t.contentDocument.defaultView,l.addEventListener("resize",c,m.passive),s())};const{isHydrated:u}=R();let l;return v(()=>{p(()=>{t=d.$el,t&&o()})}),b(n),()=>{if(u.value===!0)return P("object",{class:"q--avoid-card-border",style:y.style,tabindex:-1,type:"text/html",data:y.url,"aria-hidden":"true",onLoad:o})}}}}),{passive:z}=m,D=["both","horizontal","vertical"],$=x({name:"QScrollObserver",props:{axis:{type:String,validator:i=>D.includes(i),default:"vertical"},debounce:[String,Number],scrollTarget:H},emits:["scroll"],setup(i,{emit:g}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,r,c;T(()=>i.scrollTarget,()=>{n(),d()});function s(){t!==null&&t();const l=Math.max(0,M(r)),f=Q(r),a={top:l-e.position.top,left:f-e.position.left};if(i.axis==="vertical"&&a.top===0||i.axis==="horizontal"&&a.left===0)return;const h=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";e.position={top:l,left:f},e.directionChanged=e.direction!==h,e.delta=a,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),g("scroll",{...e})}function d(){r=C(c,i.scrollTarget),r.addEventListener("scroll",o,z),o(!0)}function n(){r!==void 0&&(r.removeEventListener("scroll",o,z),r=void 0)}function o(l){if(l===!0||i.debounce===0||i.debounce==="0")s();else if(t===null){const[f,a]=i.debounce?[setTimeout(s,i.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];t=()=>{a(f),t=null}}}const{proxy:u}=S();return T(()=>u.$q.lang.rtl,s),v(()=>{c=u.$el.parentNode,d()}),b(()=>{t!==null&&t(),n()}),Object.assign(u,{trigger:o,getPosition:()=>e}),w}});export{V as Q,$ as a};
